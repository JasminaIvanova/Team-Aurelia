@{
    ViewData["Title"] = "My Cart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    td, th {
        padding: 10px;
    }
</style>
<script src="~/js/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $(".Update").click(function (event) {
            event.preventDefault();
            var quantity = $("._quantity" + $(this).attr("data-id")).val();
            console.log(quantity);
            $.ajax({
                type: "POST",
                url:"@Url.Action("Update","Cart")",
                data: {
                    id: $(this).attr("data-id"),
                    quantity:quantity
                },
                success: function (result) {
                    window.location.href = '@Url.Action("Index")';
                }
            });
        });
    });
</script>
@{
    ViewData["Title"] = "My Cart";
}
<div class="row">
    <div class="col-8">
        <h1 class="text-info">My Cart</h1>
    </div>
</div>
<br />
<div>
    <table class="table table-stripped-border" style="color:black">
        <tr>
            <th>Name</th>
            <th>Image</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Sub Total</th>
            <th>Option</th>
        </tr>
        @{
            int cId = 0;
        foreach (var item in ViewBag.carts)
        {
            string _quantity = "_quantity" + item.Product.Id;
            cId++;
            decimal subTotal = item.Product.Price * item.quantity;
            <tr>
                <td style="color:black">@item.Product.ProductName</td>
                <td style="color:black"><img src="~/images/@item.Product.Image" width="80" /> </td>
                <td style="color:black">@item.Product.Price.ToString("$0.00")</td>
                <td style="color:black"><input type="number" class="@_quantity" value="@item.quantity"/></td>
                <td style="color:black">@subTotal.ToString("$0.00")</td>
                <td><a class="btn btn-info, Update" data-id="@item.Product.Id">Update</a></td>
                <td><a class="btn btn-info" asp-controller="cart" asp-action="Delete" asp-route-id="@item.Product.Id">Delete</a></td>
            </tr>
        }
        }
    </table>
    <a class="btn btn-info" asp-controller="home" asp-action="index">Continue Shopping</a>
    <a class="btn btn-info" asp-controller="order" asp-action="Checkout">Checkout</a>
    <div style="margin-left: 80%; height: 30px; border:1px solid black;"> 
            Total: @ViewBag.total.ToString("$0.00")
        </div>
    </div>

